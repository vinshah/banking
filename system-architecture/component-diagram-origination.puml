@startuml loan_origination_components
!define ICONURL https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/v2.4.0
!include ICONURL/common.puml

skinparam component {
  BackgroundColor<<External>> LightGray
  BackgroundColor<<Service>> LightBlue
  BackgroundColor<<Core>> LightGreen
  BackgroundColor<<Data>> LightYellow
}

title Loan Origination System - Component Architecture

package "Presentation Layer" {
  [Web Application] as WebApp
  [Mobile Application] as MobileApp
  [Admin Portal] as AdminPortal
}

package "API Layer" {
  [API Gateway] as APIGateway
  [Authentication Service] as AuthService
}

package "Application Services" {
  [Application Management] as AppMgmt <<Service>>
  [Document Management] as DocMgmt <<Service>>
  [Credit Service] as CreditSvc <<Service>>
  [Underwriting Service] as UWSvc <<Service>>
  [Offer Generation] as OfferSvc <<Service>>
  [Funding Service] as FundingSvc <<Service>>
}

package "Core Services" {
  [Decision Engine] as DecisionEngine <<Core>>
  [Business Rules Engine] as RuleEngine <<Core>>
  [Workflow Engine] as WorkflowEngine <<Core>>
  [Notification Service] as NotificationSvc <<Core>>
}

package "Integration Layer" {
  [Credit Bureau Adapter] as CreditAdapter
  [Document Verification Adapter] as DocVerifyAdapter
  [Core Banking Adapter] as CoreBankAdapter
  [e-Signature Adapter] as eSignAdapter
  [Fraud Detection Adapter] as FraudAdapter
}

package "Data Layer" {
  database "Application Database" as AppDB <<Data>>
  database "Document Storage" as DocStore <<Data>>
  database "Redis Cache" as Cache <<Data>>
  queue "Event Bus (Kafka)" as EventBus <<Data>>
}

package "External Services" {
  cloud "Credit Bureau\n(Experian/Equifax)" as CreditBureau <<External>>
  cloud "Document Verification\n(OCR Service)" as DocVerify <<External>>
  cloud "Core Banking System" as CoreBank <<External>>
  cloud "e-Signature\n(DocuSign)" as eSign <<External>>
  cloud "Fraud Detection" as FraudService <<External>>
}

' Presentation to API
WebApp --> APIGateway
MobileApp --> APIGateway
AdminPortal --> APIGateway

' API Layer connections
APIGateway --> AuthService
APIGateway --> AppMgmt
APIGateway --> DocMgmt

' Service connections
AppMgmt --> WorkflowEngine
AppMgmt --> EventBus
AppMgmt --> AppDB

DocMgmt --> DocStore
DocMgmt --> DocVerifyAdapter

CreditSvc --> CreditAdapter
CreditSvc --> DecisionEngine
CreditSvc --> FraudAdapter

UWSvc --> RuleEngine
UWSvc --> DecisionEngine

OfferSvc --> AppDB
FundingSvc --> CoreBankAdapter

' Core services
DecisionEngine --> Cache
RuleEngine --> AppDB
WorkflowEngine --> NotificationSvc
WorkflowEngine --> EventBus

' Integration to External
CreditAdapter --> CreditBureau
DocVerifyAdapter --> DocVerify
CoreBankAdapter --> CoreBank
eSignAdapter --> eSign
FraudAdapter --> FraudService

@enduml